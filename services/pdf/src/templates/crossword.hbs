<div class="header">
    <h1>{{title}}</h1>
    {{#unless isAnswerPage}}
    <p class="instructions">Разгадайте кроссворд, используя определения ниже.</p>
    {{/unless}}
</div>

<div class="crossword-container">
    <div class="crossword-grid grid-{{gridSize}} font-{{fontSize}}">
        {{#each grid}}
        <div class="grid-row">
            {{#each this}}
            <div class="crossword-cell{{#if isBlack}} black-cell{{/if}}{{#if isPartOfWord}} word-cell{{/if}}" data-row="{{@../index}}" data-col="{{@index}}">
                {{#if number}}
                <span class="cell-number">{{number}}</span>
                {{/if}}
                {{#if isAnswerPage}}
                {{#unless isBlack}}{{letter}}{{/unless}}
                {{/if}}
            </div>
            {{/each}}
        </div>
        {{/each}}
    </div>
</div>

{{#unless isAnswerPage}}
<div class="clues-section">
    <div class="clues-container">
        {{#if clues.horizontal.length}}
        <div class="clues-column">
            <h3>По горизонтали:</h3>
            <ol class="clues-list">
                {{#each clues.horizontal}}
                <li><span class="clue-number">{{number}}.</span> {{clue}} ({{length}} букв)</li>
                {{/each}}
            </ol>
        </div>
        {{/if}}

        {{#if clues.vertical.length}}
        <div class="clues-column">
            <h3>По вертикали:</h3>
            <ol class="clues-list">
                {{#each clues.vertical}}
                <li><span class="clue-number">{{number}}.</span> {{clue}} ({{length}} букв)</li>
                {{/each}}
            </ol>
        </div>
        {{/if}}
    </div>
</div>
{{/unless}}

{{#if isAnswerPage}}
<div class="answer-info">
    <h3>Ответы:</h3>
    <div class="answer-lists">
        {{#if clues.horizontal.length}}
        <div class="answer-column">
            <h4>По горизонтали:</h4>
            <ul class="answer-list">
                {{#each clues.horizontal}}
                <li><span class="answer-number">{{number}}.</span> {{clue}}</li>
                {{/each}}
            </ul>
        </div>
        {{/if}}

        {{#if clues.vertical.length}}
        <div class="answer-column">
            <h4>По вертикали:</h4>
            <ul class="answer-list">
                {{#each clues.vertical}}
                <li><span class="answer-number">{{number}}.</span> {{clue}}</li>
                {{/each}}
            </ul>
        </div>
        {{/if}}
    </div>
</div>
{{/if}}

<style>
.crossword-container {
    display: flex;
    justify-content: center;
    margin: 10mm 0;
}

.crossword-grid {
    display: grid;
    gap: 1px;
    background-color: #000;
    border: 2px solid #000;
    max-width: 150mm;
}

.crossword-grid.grid-11x11 { grid-template-columns: repeat(11, 1fr); }
.crossword-grid.grid-13x13 { grid-template-columns: repeat(13, 1fr); }
.crossword-grid.grid-15x15 { grid-template-columns: repeat(15, 1fr); }
.crossword-grid.grid-17x17 { grid-template-columns: repeat(17, 1fr); }
.crossword-grid.grid-19x19 { grid-template-columns: repeat(19, 1fr); }
.crossword-grid.grid-21x21 { grid-template-columns: repeat(21, 1fr); }

.grid-row {
    display: contents;
}

.crossword-cell {
    width: 12mm;
    height: 12mm;
    background-color: #fff;
    border: 1px solid #000;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    font-family: Arial, sans-serif;
    font-weight: bold;
}

.crossword-cell.black-cell {
    background-color: #000;
}

.crossword-cell.word-cell {
    background-color: #fff;
}

.cell-number {
    position: absolute;
    top: 1px;
    left: 2px;
    font-size: 6px;
    font-weight: normal;
    color: #000;
    line-height: 1;
}

.crossword-grid.font-large .crossword-cell {
    width: 15mm;
    height: 15mm;
    font-size: 14px;
}

.crossword-grid.font-medium .crossword-cell {
    width: 12mm;
    height: 12mm;
    font-size: 12px;
}

.crossword-grid.font-small .crossword-cell {
    width: 10mm;
    height: 10mm;
    font-size: 10px;
}

.clues-section {
    margin-top: 15mm;
}

.clues-container {
    display: flex;
    gap: 20mm;
    justify-content: space-between;
}

.clues-column {
    flex: 1;
}

.clues-column h3 {
    font-size: 14px;
    margin-bottom: 5mm;
    color: #333;
}

.clues-list {
    list-style: none;
    padding: 0;
    margin: 0;
    font-size: 11px;
    line-height: 1.4;
}

.clues-list li {
    margin-bottom: 2mm;
}

.clue-number {
    font-weight: bold;
    color: #000;
}

.answer-info {
    margin-top: 15mm;
}

.answer-info h3 {
    font-size: 16px;
    margin-bottom: 8mm;
    text-align: center;
}

.answer-lists {
    display: flex;
    gap: 20mm;
    justify-content: space-between;
}

.answer-column {
    flex: 1;
}

.answer-column h4 {
    font-size: 12px;
    margin-bottom: 5mm;
    color: #333;
}

.answer-list {
    list-style: none;
    padding: 0;
    margin: 0;
    font-size: 10px;
    line-height: 1.3;
}

.answer-list li {
    margin-bottom: 1.5mm;
}

.answer-number {
    font-weight: bold;
    color: #000;
}

.instructions {
    text-align: center;
    font-size: 12px;
    color: #666;
    margin-bottom: 5mm;
}
</style>